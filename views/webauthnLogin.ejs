<!DOCTYPE html>
<html>
  <script>
    const publicKeyCredentialRequestOptions = {
      challenge: Uint8Array.from("randomStringFromServer", (c) => c.charCodeAt(0)),
      allowCredentials: [
        {
          id: Uint8Array.from('<%= credId %>', (c) => c.charCodeAt(0)),
          type: "public-key",
          authenticatorTransport: "cross-platform"
        },
      ],
      timeout: 60000,
    };

    navigator.credentials.get({
      publicKey: publicKeyCredentialRequestOptions,
    }).then((creds) => {
      document.write("Device Validated");
      window.location.href = "http://localhost:8501/";
    
    }).catch((err) => {
      console.log(err);
      document.write(err);
    });
  </script>
</html>
